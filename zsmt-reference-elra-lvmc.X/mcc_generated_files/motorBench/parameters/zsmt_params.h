/* This is an autogenerated file from a template. Do not edit this file as it will be overwritten.*/
/**
 *
 * zsmt_params.h
 *
 * Component: commutation
 */ /*
 *
 * Motor Control Application Framework
 * R8/RC38 (commit 128946, build on 2025 Apr 09)
 *
 * (c) 2017 - 2023 Microchip Technology Inc. and its subsidiaries. You may use
 * this software and any derivatives exclusively with Microchip products.
 *
 * This software and any accompanying information is for suggestion only.
 * It does not modify Microchip's standard warranty for its products.
 * You agree that you are solely responsible for testing the software and
 * determining its suitability.  Microchip has no obligation to modify,
 * test, certify, or support the software.
 *
 * THIS SOFTWARE IS SUPPLIED BY MICROCHIP "AS IS".  NO WARRANTIES,
 * WHETHER EXPRESS, IMPLIED OR STATUTORY, APPLY TO THIS SOFTWARE,
 * INCLUDING ANY IMPLIED WARRANTIES OF NON-INFRINGEMENT, MERCHANTABILITY,
 * AND FITNESS FOR A PARTICULAR PURPOSE, OR ITS INTERACTION WITH
 * MICROCHIP PRODUCTS, COMBINATION WITH ANY OTHER PRODUCTS, OR USE IN ANY
 * APPLICATION.
 *
 * IN NO EVENT WILL MICROCHIP BE LIABLE FOR ANY INDIRECT, SPECIAL,
 * PUNITIVE, INCIDENTAL OR CONSEQUENTIAL LOSS, DAMAGE, COST OR EXPENSE OF
 * ANY KIND WHATSOEVER RELATED TO THE USE OF THIS SOFTWARE, THE
 * motorBench(R) DEVELOPMENT SUITE TOOL, PARAMETERS AND GENERATED CODE,
 * HOWEVER CAUSED, BY END USERS, WHETHER MICROCHIP'S CUSTOMERS OR
 * CUSTOMER'S CUSTOMERS, EVEN IF MICROCHIP HAS BEEN ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGES OR THE DAMAGES ARE FORESEEABLE. TO THE
 * FULLEST EXTENT ALLOWED BY LAW, MICROCHIP'S TOTAL LIABILITY ON ALL
 * CLAIMS IN ANY WAY RELATED TO THIS SOFTWARE WILL NOT EXCEED THE AMOUNT
 * OF FEES, IF ANY, THAT YOU HAVE PAID DIRECTLY TO MICROCHIP FOR THIS
 * SOFTWARE.
 *
 * MICROCHIP PROVIDES THIS SOFTWARE CONDITIONALLY UPON YOUR ACCEPTANCE OF
 * THESE TERMS.
 *
 *
 ******************************************************************************/
#ifndef __ZSMT_PARAMS_H
#define __ZSMT_PARAMS_H

#ifdef  __cplusplus
extern "C" {
#endif

/* 
 * Vexc:                           2.880  V
 * tau:                           10.000 ms
 * zeta:                           1.500  
 * executionDivider:               2.000  
 * elim:                         999.970 m
 * A:                            0.333330  
 * A1:                            29.536 mA
 * A2norm:                       492.056817  
 * A2:                            11.286  /A
 * A1A2:                         0.333330  
 * Ki:                            30.000 krad/s^2
 *                               286.482 kRPM/s
 * Kp:                           900.009  rad/s
 *                                 8.594 kRPM
 * dt:                            50.000 us
 * timestep:                     100.000 us
 * omega_lpf:                     20.000 krad/s
 *                               190.986 kRPM
 * alignTime:                      1.000 ms
 * angleLockDelay:                50.000 ms
 * angleProbeCurrent:              2.250  A
 * angleProbeTime:                10.000 ms
 * angleProbeAccumGain:                1  
 * angleProbeSlewTime:             2.184 ms
 * angleProbeSlewRate:             1.030 kA/s
 * angleProbeBlankingTime:         5.824 ms
 * correctionGainDc:               0.000  rad/A
 * pllLockTime:                   10.000 ms
 * pllLockSpeedLimit:              4.712  rad/s
 *                                45.000  RPM
 * pllLockCurrentLimit:            2.250  A
 * pllLockCurrentSquaredLimit:     5.062  A^2
 */

/* Excitation voltage amplitude */
#define ZSMT_EXCITATION_VOLTAGE_AMPLITUDE       1324      // Q15(  0.04041) =   +2.88090 V           =   +2.88000 V           + 0.0311%
/* Proportional gain of PLL = 2*zeta/B/tau */
#define ZSMT_PLL_KP                         12288      // Q12(  3.00000) = +900.00000 rad/s       = +900.00900 rad/s       - 0.0010%
#define ZSMT_PLL_KP_Q                          12
/* Integral gain of PLL = 1/B/tau^2 */
#define ZSMT_PLL_KI                           655      // Q16(  0.00999) =  +29.98352 krad/s^2    =  +30.00030 krad/s^2    - 0.0559%
/* PLL integrator time scaling factor */
#define ZSMT_PLL_DT                           983      // Q16(  0.01500) =  +49.99797 us          =  +50.00000 us          - 0.0041%
/* Scaling gain for HFI error */
#define ZSMT_ERROR_GAIN                     31492      // Q6(492.06250)  = +492.06250             = +492.05682             + 0.0012%
/* Error limit for PLL */
#define ZSMT_ERROR_LIMIT                    32767      // Q15(  0.99997) = +999.96948 m           = +999.97000 m           - 0.0001%
#define ZSMT_PLL_EXECUTION_DIVIDER                   2 // ()         defines PLL execution rate based on main control update rate
/* Pole of input low-pass filter */
#define ZSMT_FILTER_GAIN                    65535      // Q16(  0.99998) =   +9.99985 krad/s      =  +20.00000 krad/s      -50.0008%
/* Align delay */
#define ZSMT_ALIGN_TIME                        20      // Q0( 20.00000)  =   +1.00000 ms          =   +1.00000 ms          + 0.0000%
/* Angle lock delay */
#define ZSMT_ANGLE_LOCK_DELAY                1000      // Q0(1000.00000) =  +50.00000 ms          =  +50.00000 ms          + 0.0000%
/* Angle probe current */
#define ZSMT_ANGLE_PROBE_CURRENT             1691      // Q15(  0.05161) =   +2.24999 A           =   +2.25000 A           - 0.0005%
/* Angle probe duration */
#define ZSMT_ANGLE_PROBE_TIME                 200      // Q0(200.00000)  =  +10.00000 ms          =  +10.00000 ms          + 0.0000%
/* Angle probe accumulator gain */
#define ZSMT_ANGLE_PROBE_ACCUM_GAIN           328      // Q16(  0.00500) =   +1.00098             =   +1.00000             + 0.0977%
/* Angle probe blanking time */
#define ZSMT_ANGLE_PROBE_BLANKING_TIME        116      // Q0(116.00000)  =   +5.80000 ms          =   +5.82356 ms          - 0.4046%
/* Angle probe slew rate */
#define ZSMT_ANGLE_PROBE_SLEW_RATE             39      // Q15(  0.00119) =   +1.03784 kA/s        =   +1.03030 kA/s        + 0.7323%
/* DC correction gain */
#define ZSMT_CORRECTION_GAIN_DC                 0      // Q14(  0.00000) =   +0.00000 rad/A       =   +0.00000 rad/A       + 0.0000%
/* Required PLL lock time */
#define ZSMT_PLL_LOCK_TIME                    200      // Q0(200.00000)  =  +10.00000 ms          =  +10.00000 ms          + 0.0000%
/* Maximum allowed speed for ZSMT startup */
#define ZSMT_PLL_LOCK_SPEED_LIMIT             328      // Q15(  0.01001) =   +4.71699 rad/s       =   +4.71239 rad/s       + 0.0977%
/* Maximum allowed squared current for ZSMT startup */
#define ZSMT_PLL_LOCK_CURRENT_SQUARED_LIMIT         87      // Q15(  0.00266) =   +5.04710 A^2         =   +5.06250 A^2         - 0.3041%

/**
 * Returns whether ZS/MT estimator operates in a standalone manner.
 * (whether it uses its own sine/cosine calculations and Park transforms)
 *
 * @return whether ZS/MT estimator operates in a standalone manner
 */
inline static bool ZSMT_IsStandaloneEstimator(void)
{
    return true;
}

#ifdef  __cplusplus
}
#endif

#endif // __ZSMT_PARAMS_H
